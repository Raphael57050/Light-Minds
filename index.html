<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>A-Frame Dynamic Walls Example</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const scene = document.querySelector('a-scene');

        function createWall(position, rotation) {
          const wall = document.createElement('a-box');
          wall.setAttribute('position', position);
          wall.setAttribute('rotation', rotation);
          wall.setAttribute('width', '10');
          wall.setAttribute('height', '5');
          wall.setAttribute('depth', '0.1');
          wall.setAttribute('color', '#FFC65D');
          scene.appendChild(wall);

          animateWall(wall);
        }

        function animateWall(wall) {
          wall.setAttribute('animation', {
            property: 'position',
            to: `${wall.getAttribute('position').x} -2 ${wall.getAttribute('position').z}`,
            dur: 3000,
            easing: 'linear'
          });

          setTimeout(() => {
            wall.parentNode.removeChild(wall);
            createWallFromAbove(wall.getAttribute('rotation'));
          }, 3000);
        }

        function createWallFromAbove(rotation) {
          const position = rotation.y === 90 || rotation.y === -90 ? '5 7.5 0' : '0 7.5 5';
          createWall(position, rotation);
        }

        // Initial walls
        createWall('0 2.5 -5', '0 0 0');
        createWall('0 2.5 5', '0 180 0');
        createWall('-5 2.5 0', '0 90 0');
        createWall('5 2.5 0', '0 -90 0');
      });
    </script>
  </head>
  <body>
    <a-scene>
      <!-- Room floor -->
      <a-plane 
        position="0 0 0" 
        rotation="-90 0 0" 
        width="10" 
        height="10" 
        color="#7BC8A4">
      </a-plane>

      <!-- Room ceiling -->
      <a-plane 
        position="0 5 0" 
        rotation="90 0 0" 
        width="10" 
        height="10" 
        color="#7BC8A4">
      </a-plane>

      <!-- Camera entity for the user -->
      <a-entity 
        position="0 1.6 0">
        <a-camera></a-camera>
      </a-entity>
    </a-scene>
  </body>
</html>
